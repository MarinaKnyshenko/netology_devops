# Домашнее задание к занятию «Базы данных, их типы»

## Задание 1. СУБД

### Кейс

Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

### Решение

#### 1.1

В данном случае лучше подойдут реляционные базы данных, поддерживающие sql-запросы, например PostgeSQL, MySQL. Эти СУБД позволяют создать четкую структуру данных и соответствуют принципам ACID, что важно при работе с финансами. Также с помощью SQL будет удобно формировать отчеты.

#### 1.1.* 

* OpenSSL. Позволяет использовать разные криптографические алгоритмы.
* Некриптографические хеш-функции. Могут применяться там, где важна скорость и нет смысла применять медленные MD5 или SHA1. Например, для построения хеш-таблиц с хранением пар ключ-значение или для быстрой проверки контрольной суммы при передаче больших файлов. Прмерами могут быть XXH3, CityHash, xxHash
* Intel Integrated Performance Primitives (IPP). Библиотека от компании Intel, которая включает оптимизированные алгоритмы хеширования и другие криптографические функции, специально адаптированные для аппаратных возможностей Intel.

### 1.2.

Возможно использование комбинации СУБД. Для лендингов можно использовать MongoDB, известную гибкостью при работе с большими объемами неструктурированных данных. Для CRM лучше подойдут четко структурированные реляционные базы данных, например PostgeSQL.

### 1.2.*

Использовать одну СУБД для лендингов и CRM можно. PostgreSQL предоставляет множество возможностей "из коробки", является достаточно гибкой и быстрой системой

### 1.3.

Требование "простая и понятная структура" является творческим и может пониматься по-разному разными подразделениями компании. MySQL предоставит широкий простор для творчества. 

### 1.3.*

Конечно. Можно использовать уже установленный в первом кейсе PostgeSQL. Он сложнее MySQL, но тоже позволит сформировать базу, соответствующую структуре компании.

### 1.4

Стоит присмотреться к графовым СУБД. Их архитектура позволяет представлять и запрашивать любые связи между объектами, независимо от их сложности, что позволит находить лучшие маршруты, прогнозировать движение транспорта и оценивать пропускную способность дорог.

### 1.4.*

Если есть возможность, для отдела закупок лучше создать свою СУБД. Для отдела закупок больше подойдут реляционные БД. Конечно можно и логистику тоже сделать с помощью реляционной СУБД, но тогда могут быть упущены возможности, которые предоставляют разные NoSQL решения.

### 1.5

Можно.  PostgreSQL универсальное решение, сочетающее гибкость, быстроту, позволяющее сформировтаь четкую структуру. Более того, для PostgreSQL существуют расширения, позволяющие работать с графами (для отдела логистики).

## Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

### Решение

1. Пользователь вводит номер своего телефона и сумму пополнения на сайте оператора или в мобильном приложении. Введенные данные передаются на сервер оператора.
2. Оператор делает запрос к платежной системе на инициализацию платежа.
3. На стороне платежной системы происходит проверка наличия введенной суммы на счете пользователя.
4. Если сумма присуствует на счете, платежная система отправляет код для подтверждения транзакции на телефон пользователя.
5. Пользователь подтверждает транзакцию с помощью отправленного кода.
6. Указанная сумма списывается со счета и добавляется на баланс телефона.
7. Платежная система присылает операту коллбек об успешном платеже.
8. Баланс телефона обновляется.

Пополнение счета через автоплатеж.

1. Пользователь должен на сайте оператора или в мобильном приложении дать согласие на создание рекуррентного профиля.
2. Пользователь должен настроить автоплатеж (указать сумму, переодичность списания).
3. При наступлении указанных условий автоплатежа, оператору будет достаточно отправить к платежной системе один запрос без участия пользователя.
4. Для рекуррентных платежей платежная система так же будет присылать коллбеки оператору.

## Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

### Решение

1. Хорошо структурированные запросы: Базы данных SQL используют структурированный язык запросов, что делает его подходящим для сложных задач обработки данных.
2. Относительная простота в использовании: SQL изучить проще, чем, например, язык MongoDB.
3. Гибкая схема: Базы данных SQL имеют очень гибкую схему, позволяющую управлять различными типами данных.
4. Совместимость с популярными языками программирования.: SQL совместим с популярными языками программирования, такими как Java, Python и C#.
5. Большое количество документации

Преимущества NewSQL

1. NewSQL предлагает решения, которые могут масштабироваться горизонтально, распределяя нагрузку по нескольким узлам.
2. Подход позволяет сохранить инвестиции в существующую инфраструктуру, одновременно расширяя возможности этих систем для того, чтобы справиться с существующими вызовами.

## Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

### Решение

Критерии выбора:

* Производительность.
* Масштабируемость.
* Отказоустойчивость.
* Распределенность.

При выборе модели распределенных вычислений для работы с огромным количеством данных можно рассмотреть два варианта:

1. Модель "массовой обработки данных" (MapReduce): данная модель подходит для обработки больших объемов данных, разбивая их на части и распределяя для параллельной обработки на несколько серверов. 

Примером распределенной СУБД, основанной на модели MapReduce может быть Apache Hadoop.

2. Модель "управляемых транзакций" (ACID)

Данная модель обеспечит возможность выполнения сложных операций с данными и соблюдение целостности данных при распределении на несколько серверов. 

Примеры распределенных СУБД, основанных на модели управляемых транзакций, могут быть PostgreSQL, MySQL Cluster и Oracle RAC.
